<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ğŸ§  BrainCraft - Ø¨Ù†Ø§Ø¡ Ø®Ù„ÙŠØ© Ø¹ØµØ¨ÙŠØ©</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Arial', sans-serif;
      background-color: #f5faff;
      margin: 0;
      padding: 0;
    }

    #startScreen {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #e6f2ff;
      text-align: center;
    }

    #startScreen h1 {
      font-size: 3em;
      color: #007acc;
    }

    #startScreen p {
      font-size: 1.2em;
      margin: 20px;
    }

    #startScreen button {
      padding: 15px 30px;
      font-size: 1em;
      background-color: #007acc;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 8px;
    }

    #gameContainer {
      text-align: center;
      padding: 20px;
    }

    #progressBar {
      background-color: #d0ebff;
      color: #003366;
      padding: 10px;
      font-weight: bold;
      display: inline-block;
      margin-bottom: 10px;
      border-radius: 5px;
    }

    #gameCanvas {
      border: 2px solid #007acc;
      background-color: #fff;
      margin: 20px auto;
      display: block;
    }

    #infoBox {
      margin-top: 15px;
      padding: 10px;
      background-color: #e6f2ff;
      color: #003366;
      display: inline-block;
      max-width: 600px;
      border-radius: 8px;
    }
  </style>
</head>
<body>

  <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
  <div id="startScreen">
    <h1>ğŸ§  BrainCraft</h1>
    <p>Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ù„Ø¹Ø¨Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø­ÙˆÙ„ ØªØ±ÙƒÙŠØ¨ Ø§Ù„Ø®Ù„ÙŠØ© Ø§Ù„Ø¹ØµØ¨ÙŠØ©</p>
    <button onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
  </div>

  <!-- Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„Ø¹Ø¨Ø© -->
  <div id="gameContainer" style="display: none;">
    <h1>ğŸ§  BrainCraft - Ø¨Ù†Ø§Ø¡ Ø®Ù„ÙŠØ© Ø¹ØµØ¨ÙŠØ©</h1>
    <div id="progressBar">Ø§Ù„Ù…Ø³ØªÙˆÙ‰: <span id="levelNum">1</span></div>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <div id="infoBox">Ø§Ø³Ø­Ø¨ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ ÙˆØ¶Ø¹Ù‡Ø§ ÙÙŠ Ø£Ù…Ø§ÙƒÙ†Ù‡Ø§ Ø§Ù„ØµØ­ÙŠØ­Ø©</div>
  </div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    let currentLevel = 1;
    let score = 0;

    // Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø¯Ù…Ø¬Ø© Ø¨ØµÙŠØºØ© Base64
    const neuronImages = {
      "Ø¬Ø³Ù… Ø§Ù„Ø®Ù„ÙŠØ©": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAyCAIAAAA...", // Ø¬Ø³Ù… Ø§Ù„Ø®Ù„ÙŠØ©
      "Ø§Ù„Ù…Ø­ÙˆØ± (Axon)": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAyCAIAAAA...", // Axon
      "Ø§Ù„Ø´Ø¬Ø±Ø© Ø§Ù„Ø¹ØµØ¨ÙŠØ©": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAyCAIAAAA...", // Dendrites
      "Ø§Ù„ØºØ´Ø§Ø¡ Ø§Ù„Ù…Ø§ÙŠÙ„ÙŠÙ†ÙŠ": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAyCAIAAAA...", // Myelin Sheath
      "Ø§Ù„ØªØ´Ø§Ø¨Ùƒ Ø§Ù„Ø¹ØµØ¨ÙŠ": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAyCAIAAAA..."  // Synapse
    };

    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ù…Ø¹ Ø§Ù„ØµÙˆØ±
    const levels = [
      {
        title: "Ù…Ø³ØªÙˆÙ‰ 1: Ø¬Ø³Ù… Ø§Ù„Ø®Ù„ÙŠØ© ÙˆØ§Ù„Ø¹ØµØ¨ÙˆÙ†",
        parts: [
          { name: "Ø¬Ø³Ù… Ø§Ù„Ø®Ù„ÙŠØ©", x: 400, y: 300, placed: false, correctX: 380, correctY: 280 },
          { name: "Ø§Ù„Ù…Ø­ÙˆØ± (Axon)", x: 500, y: 300, placed: false, correctX: 480, correctY: 280 },
          { name: "Ø§Ù„Ø´Ø¬Ø±Ø© Ø§Ù„Ø¹ØµØ¨ÙŠØ©", x: 300, y: 300, placed: false, correctX: 280, correctY: 280 }
        ],
        info: {
          "Ø¬Ø³Ù… Ø§Ù„Ø®Ù„ÙŠØ©": "Ù‡Ùˆ Ù…Ø±ÙƒØ² Ø§Ù„Ø®Ù„ÙŠØ© ÙˆÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù†ÙˆØ§Ø©.",
          "Ø§Ù„Ù…Ø­ÙˆØ± (Axon)": "ÙŠÙ†Ù‚Ù„ Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª Ù…Ù† Ø§Ù„Ø®Ù„ÙŠØ© Ø¥Ù„Ù‰ Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø£Ø®Ø±Ù‰.",
          "Ø§Ù„Ø´Ø¬Ø±Ø© Ø§Ù„Ø¹ØµØ¨ÙŠØ©": "ØªØ³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª Ù…Ù† Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø¹ØµØ¨ÙŠØ© Ø§Ù„Ù…Ø¬Ø§ÙˆØ±Ø©."
        }
      },
      {
        title: "Ù…Ø³ØªÙˆÙ‰ 2: Ø§Ù„ØºØ´Ø§Ø¡ Ø§Ù„Ù…Ø§ÙŠÙ„ÙŠÙ†ÙŠ ÙˆØ§Ù„ØªØ´Ø§Ø¨Ùƒ",
        parts: [
          { name: "Ø§Ù„ØºØ´Ø§Ø¡ Ø§Ù„Ù…Ø§ÙŠÙ„ÙŠÙ†ÙŠ", x: 550, y: 300, placed: false, correctX: 530, correctY: 280 },
          { name: "Ø§Ù„ØªØ´Ø§Ø¨Ùƒ Ø§Ù„Ø¹ØµØ¨ÙŠ", x: 600, y: 300, placed: false, correctX: 580, correctY: 280 }
        ],
        info: {
          "Ø§Ù„ØºØ´Ø§Ø¡ Ø§Ù„Ù…Ø§ÙŠÙ„ÙŠÙ†ÙŠ": "ÙŠØ­Ù…ÙŠ Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ø¹ØµØ¨ÙŠ ÙˆÙŠØ³Ø±Ø¹ Ù…Ù† Ù†Ù‚Ù„ Ø§Ù„Ø¥Ø´Ø§Ø±Ø©.",
          "Ø§Ù„ØªØ´Ø§Ø¨Ùƒ Ø§Ù„Ø¹ØµØ¨ÙŠ": "Ù†Ù‚Ø·Ø© Ø§Ù„ØªÙˆØ§ØµÙ„ Ø¨ÙŠÙ† Ø®Ù„ÙŠØ© ÙˆØ£Ø®Ø±Ù‰."
        }
      }
    ];

    let draggedPart = null;
    let imagesLoaded = 0;
    const images = {};

    function loadImages() {
      levels.forEach((level) => {
        level.parts.forEach(part => {
          const img = new Image();
          img.src = neuronImages[part.name];
          img.onload = () => {
            images[part.name] = img;
            imagesLoaded++;
            if (imagesLoaded === getTotalParts()) draw();
          };
        });
      });
    }

    function getTotalParts() {
      return levels.reduce((sum, level) => sum + level.parts.length, 0);
    }

    function startGame() {
      document.getElementById("startScreen").style.display = "none";
      document.getElementById("gameContainer").style.display = "block";
      loadImages();
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Ø±Ø³Ù… Ø®Ø·ÙˆØ· Ø§Ù„Ø¥Ø±Ø´Ø§Ø¯
      ctx.setLineDash([5]);
      ctx.strokeStyle = "#999";

      const level = levels[currentLevel - 1];
      level.parts.forEach(part => {
        ctx.strokeRect(part.correctX, part.correctY, 40, 40);
      });
      ctx.setLineDash([]);

      // Ø±Ø³Ù… Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡
      level.parts.forEach(part => {
        if (images[part.name]) {
          ctx.drawImage(images[part.name], part.x, part.y, 40, 40);
        }
      });

      if (level.parts.every(p => p.placed)) {
        document.getElementById("infoBox").innerHTML = `
          ğŸ‰ Ø±Ø§Ø¦Ø¹! Ù„Ù‚Ø¯ Ø£ØªÙ…Ù…Øª Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ${currentLevel}!<br>
          <button onclick="nextLevel()">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ</button><br>
          <strong>Ù†Ù‚Ø§Ø·Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ${score += 10}</strong>
        `;
      }
    }

    function nextLevel() {
      if (currentLevel < levels.length) {
        currentLevel++;
        resetGame();
      } else {
        showCertificate();
      }
    }

    function showCertificate() {
      document.getElementById("infoBox").innerHTML = `
        ğŸ“œ <strong>Ø´Ù‡Ø§Ø¯Ø© Ø¥Ù†Ø¬Ø§Ø²</strong><br>
        Ù„Ù‚Ø¯ Ø£ØªÙ…Ù…Øª Ø¬Ù…ÙŠØ¹ Ù…Ø³ØªÙˆÙŠØ§Øª Ù„Ø¹Ø¨Ø© BrainCraft.<br>
        ğŸ§  Ø£Ù†Øª Ø§Ù„Ø¢Ù† Ù‚Ø§Ø¯Ø± Ø¹Ù„Ù‰ ÙÙ‡Ù… ØªØ±ÙƒÙŠØ¨ Ø§Ù„Ø®Ù„ÙŠØ© Ø§Ù„Ø¹ØµØ¨ÙŠØ©!<br>
        <strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‚Ø§Ø·: ${score}</strong>
      `;
    }

    function resetGame() {
      const level = levels[currentLevel - 1];
      level.parts.forEach(p => {
        p.placed = false;
        p.x = Math.random() * 600 + 100;
        p.y = Math.random() * 400 + 100;
      });
      document.getElementById("levelNum").innerText = currentLevel;
      document.getElementById("infoBox").innerText = "Ø§Ø³Ø­Ø¨ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ ÙˆØ¶Ø¹Ù‡Ø§ ÙÙŠ Ø£Ù…Ø§ÙƒÙ†Ù‡Ø§ Ø§Ù„ØµØ­ÙŠØ­Ø©";
      draw();
    }

    canvas.addEventListener("mousedown", e => {
      const rect = canvas.getBoundingClientRect();
      const mouseX = e.clientX - rect.left;
      const mouseY = e.clientY - rect.top;

      const level = levels[currentLevel - 1];
      level.parts.forEach(part => {
        if (!part.placed &&
            mouseX > part.x && mouseX < part.x + 40 &&
            mouseY > part.y && mouseY < part.y + 40) {
          draggedPart = part;
        }
      });
    });

    canvas.addEventListener("mousemove", e => {
      if (draggedPart) {
        const rect = canvas.getBoundingClientRect();
        const mouseX = e.clientX - rect.left;
        const mouseY = e.clientY - rect.top;
        draggedPart.x = mouseX - 20;
        draggedPart.y = mouseY - 20;
        draw();
      }
    });

    canvas.addEventListener("mouseup", () => {
      if (draggedPart) {
        const level = levels[currentLevel - 1];
        level.parts.forEach(part => {
          if (draggedPart === part) {
            const dx = Math.abs(part.x - part.correctX);
            const dy = Math.abs(part.y - part.correctY);
            if (dx < 20 && dy < 20) {
              part.x = part.correctX;
              part.y = part.correctY;
              part.placed = true;

              // Ø¹Ø±Ø¶ Ø´Ø±Ø­ Ø§Ù„Ø¬Ø²Ø¡
              document.getElementById("infoBox").innerHTML = `
                ğŸ“˜ <strong>${part.name}:</strong><br>
                ${level.info[part.name]}<br>
                <small>Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„Ù„Ø¹Ø¨...</small>
              `;
            }
          }
        });
        draggedPart = null;
        draw();
      }
    });

    document.getElementById("levelNum").innerText = currentLevel;
  </script>
</body>
</html>
